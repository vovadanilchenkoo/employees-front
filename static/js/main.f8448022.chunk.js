(this["webpackJsonpreact-crud"]=this["webpackJsonpreact-crud"]||[]).push([[0],{26:function(e,t,a){e.exports=a(44)},31:function(e,t,a){},32:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),c=a.n(r),s=(a(31),a(32),a(5)),i=a(9),o=a(19),m=a(20),p=a(24),u=a(21),d=a(25),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={hasError:!1},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?l.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(l.a.Component),E=a(1),b=a.n(E),g=a(3),y=a(4),h={apiUrl:"http://localhost:3001"},_=function(){var e=Object(n.useState)(window.localStorage.getItem("accessToken")),t=Object(y.a)(e,2),a=t[0],r=t[1],c=Object(i.f)();Object(n.useEffect)((function(){r(window.localStorage.getItem("accessToken"))}));var o=function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h.apiUrl,"/user/logout"),{headers:{"x-access-token":"".concat(window.localStorage.getItem("accessToken"))}});case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent,c.push("/"),window.localStorage.removeItem("accessToken");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement("header",null,l.a.createElement("nav",{className:"nav"},l.a.createElement("div",{className:"container"},l.a.createElement(s.b,{to:"/",className:"content__page-link"},"Main"),null!==a?l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{to:"/employees-table",className:"content__page-link"},"Employees table"),l.a.createElement(s.b,{to:"/create-employee",className:"content__page-link"},"Create employee"),l.a.createElement(s.b,{to:"/logout",onClick:o,className:"content__page-link"},"Logout")):l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{to:"/sign-in",className:"content__page-link"},l.a.createElement("i",{className:"material-icons"},"input"),"Sign in"),l.a.createElement(s.b,{to:"/sign-up",className:"content__page-link"},l.a.createElement("i",{className:"material-icons"},"group_add"),"Sign up")))))},w=function(){return l.a.createElement("h1",{className:"center-align"},"Welcome to react CRUD app using Node, PostgreSQL, Redis on backend")},v=(a(39),function(){var e=Object(n.useState)(""),t=Object(y.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(y.a)(c,2),o=s[0],m=s[1],p=Object(i.f)(),u=function(e){"email"===e.target.id?r(e.target.value):m(e.target.value)},d=function(){var e=Object(g.a)(b.a.mark((function e(t){var n,l,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=JSON.stringify({email:a,password:o}),e.next=4,fetch("".concat(h.apiUrl,"/user/sign-in"),{method:"POST",headers:{"Content-Type":"application/json"},body:n});case 4:return l=e.sent,e.next=7,l.json();case 7:(r=e.sent).token&&(window.localStorage.setItem("accessToken",r.token),p.push("/employees-table"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"sign-in-wrap"},l.a.createElement("h1",{className:"center-align"},"Sign in"),l.a.createElement("form",{className:"sign-in-form"},l.a.createElement("div",{className:"sign-in-item input-field col s6"},l.a.createElement("input",{id:"email",onChange:u,type:"text"}),l.a.createElement("label",{htmlFor:"email"},"Email")),l.a.createElement("div",{className:"sign-in-item input-field col s6"},l.a.createElement("input",{id:"password",onChange:u,type:"password","aria-autoComplete":"list"}),l.a.createElement("label",{htmlFor:"password"},"Password")),l.a.createElement("button",{type:"submit",onClick:d,className:"btn waves-effect waves-light"},"Submit",l.a.createElement("i",{className:"material-icons right"},"send"))))}),N=(a(40),function(){var e=Object(n.useState)(""),t=Object(y.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(y.a)(c,2),o=s[0],m=s[1],p=Object(i.f)(),u=function(e){"email"===e.target.id?r(e.target.value):m(e.target.value)},d=function(){var e=Object(g.a)(b.a.mark((function e(t){var n,l,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=JSON.stringify({email:a,password:o}),e.next=4,fetch("".concat(h.apiUrl,"/create-user"),{method:"POST",headers:{"Content-Type":"application/json"},body:n});case 4:return l=e.sent,e.next=7,l.json();case 7:(r=e.sent).token&&(window.localStorage.setItem("accessToken",r.token),p.push("/employees-table"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"sign-up-wrap"},l.a.createElement("h1",{className:"center-align"},"Sign up"),l.a.createElement("form",{className:"sign-up-form"},l.a.createElement("div",{className:"sign-up-item input-field col s6"},l.a.createElement("input",{id:"email",onChange:u,type:"text"}),l.a.createElement("label",{htmlFor:"email"},"Email")),l.a.createElement("div",{className:"sign-up-item input-field col s6"},l.a.createElement("input",{id:"password",onChange:u,type:"password"}),l.a.createElement("label",{htmlFor:"password"},"Password")),l.a.createElement("button",{type:"submit",name:"action",onClick:d,className:"btn waves-effect waves-light"},"Submit",l.a.createElement("i",{className:"material-icons right"},"send"))))}),k=a(11);a(41);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var j=function(){var e=Object(n.useState)({name:"",position:"",salary:"",start_working_at:"",work_days:"",out_days:""}),t=Object(y.a)(e,2),a=t[0],r=t[1],c=function(e){e.persist();var t=e.target.id;r((function(a){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,Object(k.a)({},t,e.target.value))}))},s=function(){var e=Object(g.a)(b.a.mark((function e(t){var n,l,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=JSON.stringify(a),e.next=4,fetch("".concat(h.apiUrl,"/create-employee"),{method:"POST",headers:{"x-access-token":"".concat(window.localStorage.getItem("accessToken")),"Content-Type":"application/json"},body:n});case 4:return l=e.sent,e.next=7,l.json();case 7:r=e.sent,console.log(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"create-employee-wrap"},l.a.createElement("h1",null,"Create employee"),l.a.createElement("form",{className:"create-employee-form"},l.a.createElement("div",{className:"create-employee-item input-field col s6"},l.a.createElement("input",{onChange:c,id:"name",type:"text"}),l.a.createElement("label",{htmlFor:"name"},"Name")),l.a.createElement("div",{className:"create-employee-item input-field col s6"},l.a.createElement("input",{onChange:c,id:"position",type:"text"}),l.a.createElement("label",{htmlFor:"position"},"Position")),l.a.createElement("div",{className:"create-employee-item input-field col s6"},l.a.createElement("input",{onChange:c,id:"salary",type:"number"}),l.a.createElement("label",{htmlFor:"salary"},"Salary")),l.a.createElement("div",{className:"create-employee-item input-field col s6"},l.a.createElement("input",{onChange:c,id:"start_working_at",type:"date"}),l.a.createElement("label",{htmlFor:"start_working_at"},"Start working at")),l.a.createElement("div",{className:"create-employee-item input-field col s6"},l.a.createElement("input",{onChange:c,id:"work_days",type:"number"}),l.a.createElement("label",{htmlFor:"work_days"},"Work days")),l.a.createElement("div",{className:"create-employee-item input-field col s6"},l.a.createElement("input",{onChange:c,id:"out_days",type:"text"}),l.a.createElement("label",{htmlFor:"out days"},"Out days")),l.a.createElement("button",{type:"submit",onClick:s,className:"btn waves-effect waves-light"},"Submit",l.a.createElement("i",{className:"material-icons right"},"send"))))},S=(a(42),function(){var e=Object(n.useState)([]),t=Object(y.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){function e(){return(e=Object(g.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h.apiUrl,"/employees-list"),{headers:{"x-access-token":"".concat(window.localStorage.getItem("accessToken"))}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,r(a.rows);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var c=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h.apiUrl,"/employee/").concat(t),{method:"DELETE",headers:{"x-access-token":"".concat(window.localStorage.getItem("accessToken"))}});case 2:return e.sent,e.next=5,fetch("".concat(h.apiUrl,"/employees-list"),{headers:{"x-access-token":"".concat(window.localStorage.getItem("accessToken"))}});case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,r(n.rows);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=a.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,l.a.createElement(s.b,{to:"/employee/".concat(e.id)},e.name)),l.a.createElement("td",null,e.position),l.a.createElement("td",null,e.salary),l.a.createElement("td",null,e.start_working_at),l.a.createElement("td",null,e.work_days),l.a.createElement("td",null,l.a.createElement("span",{className:"employees-table__content"},e.out_days),l.a.createElement("button",{type:"button",onClick:function(){return c(e.id)},className:"employees-table__delete btn-floating btn-middle waves-effect waves-light"},l.a.createElement("i",{className:"material-icons"},"delete"))))}));return l.a.createElement("div",{className:"employees-list-wrap"},l.a.createElement("h1",{className:"center-align"},"Employees list"),l.a.createElement("table",{className:"striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Position"),l.a.createElement("th",null,"Salary"),l.a.createElement("th",null,"Start working at"),l.a.createElement("th",null,"Work days"),l.a.createElement("th",null,"Out days"))),l.a.createElement("tbody",null,i)))});a(43);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var C=function(e){var t=Object(n.useState)({name:"",position:"",salary:"",start_working_at:"",work_days:"",out_days:""}),a=Object(y.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)((function(){(function(){var t=Object(g.a)(b.a.mark((function t(){var a,n,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.match.params.id,t.next=3,fetch("".concat(h.apiUrl,"/employee/").concat(a),{headers:{"x-access-token":"".concat(window.localStorage.getItem("accessToken"))}});case 3:return n=t.sent,t.next=6,n.json();case 6:l=t.sent,c((function(e){return{name:l.name,position:l.position,salary:l.salary,start_working_at:l.start_working_at,work_days:l.work_days,out_days:l.out_days}}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var s=function(e){e.target.closest(".profile-data-list__item").querySelector(".profile-data-list__inner").classList.toggle("profile-data-list__inner_active")},i=function(e){e.persist();var t=e.target.id;c((function(a){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,Object(k.a)({},t,e.target.value))}))},o=function(){var t=Object(g.a)(b.a.mark((function t(){var a,n,l,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.match.params.id,n=JSON.stringify(r),t.next=4,fetch("".concat(h.apiUrl,"/employee/").concat(a),{method:"PUT",headers:{"x-access-token":"".concat(window.localStorage.getItem("accessToken")),"Content-Type":"application/json"},body:n});case 4:return l=t.sent,t.next=7,l.json();case 7:c=t.sent,console.log(c);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return l.a.createElement("div",{className:"profile"},l.a.createElement("ul",{className:"profile-data-list collection"},l.a.createElement("li",{className:"profile-data-list__item collection-item"},l.a.createElement("div",{className:"profile-data-list__inner"},l.a.createElement("span",{className:"profile-data-list__content"},r.name),l.a.createElement("div",{className:"profile-input-field input-field col s6"},l.a.createElement("input",{id:"name",type:"text",placeholder:" ",value:r.name,onChange:i,className:"profile-data-list__input"}),l.a.createElement("label",{htmlFor:"name"},"Name"))),l.a.createElement("button",{type:"button",onClick:s,className:"profile-data-list__edit btn-floating btn-middle waves-effect waves-light"},l.a.createElement("i",{className:"material-icons"},"edit"))),l.a.createElement("li",{className:"profile-data-list__item collection-item"},l.a.createElement("div",{className:"profile-data-list__inner"},l.a.createElement("span",{className:"profile-data-list__content"},r.position),l.a.createElement("div",{className:"profile-input-field input-field col s6"},l.a.createElement("input",{id:"position",type:"text",placeholder:"",value:r.position,onChange:i,className:"profile-data-list__input"}),l.a.createElement("label",{htmlFor:"position"},"Position"))),l.a.createElement("button",{type:"button",onClick:s,className:"profile-data-list__edit btn-floating btn-middle waves-effect waves-light"},l.a.createElement("i",{className:"material-icons"},"edit"))),l.a.createElement("li",{className:"profile-data-list__item collection-item"},l.a.createElement("div",{className:"profile-data-list__inner"},l.a.createElement("span",{className:"profile-data-list__content"},r.salary),l.a.createElement("div",{className:"profile-input-field input-field col s6"},l.a.createElement("input",{id:"salary",type:"text",placeholder:"",value:r.salary,onChange:i,className:"profile-data-list__input"}),l.a.createElement("label",{htmlFor:"salary"},"Salary"))),l.a.createElement("button",{type:"button",onClick:s,className:"profile-data-list__edit btn-floating btn-middle waves-effect waves-light"},l.a.createElement("i",{className:"material-icons"},"edit"))),l.a.createElement("li",{className:"profile-data-list__item collection-item"},l.a.createElement("div",{className:"profile-data-list__inner"},l.a.createElement("span",{className:"profile-data-list__content"},r.start_working_at),l.a.createElement("div",{className:"profile-input-field input-field col s6"},l.a.createElement("input",{id:"start_working_at",type:"text",placeholder:"",value:r.start_working_at,onChange:i,className:"profile-data-list__input"}),l.a.createElement("label",{htmlFor:"start_working_at"},"Start working at"))),l.a.createElement("button",{type:"button",onClick:s,className:"profile-data-list__edit btn-floating btn-middle waves-effect waves-light"},l.a.createElement("i",{className:"material-icons"},"edit"))),l.a.createElement("li",{className:"profile-data-list__item collection-item"},l.a.createElement("div",{className:"profile-data-list__inner"},l.a.createElement("span",{className:"profile-data-list__content"},r.work_days),l.a.createElement("div",{className:"profile-input-field input-field col s6"},l.a.createElement("input",{id:"work_days",type:"text",placeholder:"",value:r.work_days,onChange:i,className:"profile-data-list__input"}),l.a.createElement("label",{htmlFor:"work_days"},"Work days"))),l.a.createElement("button",{type:"button",onClick:s,className:"profile-data-list__edit btn-floating btn-middle waves-effect waves-light"},l.a.createElement("i",{className:"material-icons"},"edit"))),l.a.createElement("li",{className:"profile-data-list__item collection-item"},l.a.createElement("div",{className:"profile-data-list__inner"},l.a.createElement("span",{className:"profile-data-list__content"},r.out_days),l.a.createElement("div",{className:"profile-input-field input-field col s6"},l.a.createElement("input",{id:"out_days",type:"text",placeholder:"",value:r.out_days,onChange:i,className:"profile-data-list__input"}),l.a.createElement("label",{htmlFor:"out_days"},"Out days"))),l.a.createElement("button",{type:"button",onClick:s,className:"profile-data-list__edit btn-floating btn-middle waves-effect waves-light"},l.a.createElement("i",{className:"material-icons"},"edit")))),l.a.createElement("button",{type:"button",onClick:o,className:"profile__send-btn btn waves-effect waves-light"},"Submit",l.a.createElement("i",{className:"material-icons right"},"send")))},P=function(){return l.a.createElement(s.a,null,l.a.createElement(_,null),l.a.createElement("div",{className:"container"},l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:w}),l.a.createElement(i.a,{path:"/sign-in",component:v}),l.a.createElement(i.a,{path:"/sign-up",component:N}),l.a.createElement(i.a,{path:"/create-employee",component:j}),l.a.createElement(f,null,l.a.createElement(i.a,{path:"/employees-table",component:S})),l.a.createElement(i.a,{path:"/employee/:id",component:C}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(P,null),document.getElementById("content")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.f8448022.chunk.js.map